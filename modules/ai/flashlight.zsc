extend class UaS_AI_Handler {
	UaS_LaserLightModule llm;
	int desiredmode;

	void Flashlight() {
		desiredmode = 2;
		if (globalfreeze || level.Frozen) { return; }
		// Only do light for human-type classes
		bool validClass = (
			owner.CheckClass("HERPBot", AAPTR_DEFAULT, true) ||
			owner.CheckClass("ZombieStormtrooper", AAPTR_DEFAULT, true) ||
			owner.CheckClass("HideousShotgunGuy", AAPTR_DEFAULT, true) ||
			owner.CheckClass("VulcanetteGuy", AAPTR_DEFAULT, true) ||
			owner.CheckClass("HDMarine", AAPTR_DEFAULT, true)
		);
		if (!validClass) { return; }

		if (!owner.FindInventory("UaS_LaserLightModule")) {
			owner.giveinventory("UaS_LaserLightModule", 1);
			llm = UaS_LaserLightModule(owner.FindInventory("UaS_LaserLightModule"));
			llm.ToggleSwitch();
			llm.ModeSwitch(desiredmode);
		}
	}
}
